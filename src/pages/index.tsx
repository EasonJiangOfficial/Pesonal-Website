import React, { useState, useEffect } from "react";
import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import Hero from "../components/Hero/hero";
import Projects from "../components/Projects/projects";
import PageContainer from "../components/Layout/pageContainer";
import AboutMe from "../components/aboutMe";
// import Blog from "./blog";

import {
  collection,
  getDocs,
  getFirestore,
  query,
  where,
} from "firebase/firestore";
import { GetStaticPropsContext } from "next";
import app from "../lib/firebase";



interface Project {
  description: string;
  github: string;
  name: string;
  technologies: string[];
}

interface ProjectsListProps {
  projects: Project[];
}


 const landingPage : React.FC<ProjectsListProps> = ({projects}) => {
  return (
    <div className="flex flex-col justify-center items-center bg-gradient-to-br from-[rgb(18,24,27)] to-[rgb(32,39,55)]">
      <Head>
        <title>EJ's Site | Home</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/images/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      </Head>
      <PageContainer>
        <Hero />
        <AboutMe />
        <Projects projectsList={projects}/>
        {/* <Anime />
        <Blog /> */}
      </PageContainer>
    </div>
  );
}

export async function getStaticProps(context: GetStaticPropsContext) {
  const db = getFirestore(app);
  const projectsCollection = collection(db, "Projects");
  const projectsSnapshot = await getDocs(projectsCollection);
  const projects = projectsSnapshot.docs.map((doc) => doc.data());

  return {
    props: {
      projects
    }
  };  
}

export default landingPage;